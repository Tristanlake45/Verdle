<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vern Eide Wordle</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #121213;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      padding-top: 40px;
    }

    h1 {
      letter-spacing: 0.2em;
      font-size: 28px;
      margin-bottom: 4px;
    }

    h2 {
      font-size: 14px;
      font-weight: 400;
      margin-top: 0;
      margin-bottom: 20px;
      opacity: 0.8;
    }

    #board {
      display: grid;
      grid-template-rows: repeat(6, 1fr);
      gap: 5px;
    }

    .row {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 5px;
    }

    .tile {
      width: 60px;
      height: 60px;
      border: 2px solid #3a3a3c;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      font-weight: bold;
      text-transform: uppercase;
      box-sizing: border-box;
    }

    .tile.filled {
      border-color: #565758;
    }

    .tile.correct {
      background-color: #6aaa64;
      border-color: #6aaa64;
      color: #fff;
    }

    .tile.present {
      background-color: #c9b458;
      border-color: #c9b458;
      color: #fff;
    }

    .tile.absent {
      background-color: #3a3a3c;
      border-color: #3a3a3c;
      color: #fff;
    }

    #message {
      margin-top: 20px;
      min-height: 24px;
      text-align: center;
    }

    #controls {
      margin-top: 10px;
    }

    button {
      padding: 8px 16px;
      font-size: 14px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
    <h1>VERDLE</h1>
    <h2>The Vern Eide Word Game</h2>
    

  <div id="board">
    <!-- 6 rows Ã— 5 tiles -->
    <div class="row">
      <div class="tile" id="tile-0-0"></div>
      <div class="tile" id="tile-0-1"></div>
      <div class="tile" id="tile-0-2"></div>
      <div class="tile" id="tile-0-3"></div>
      <div class="tile" id="tile-0-4"></div>
    </div>
    <div class="row">
      <div class="tile" id="tile-1-0"></div>
      <div class="tile" id="tile-1-1"></div>
      <div class="tile" id="tile-1-2"></div>
      <div class="tile" id="tile-1-3"></div>
      <div class="tile" id="tile-1-4"></div>
    </div>
    <div class="row">
      <div class="tile" id="tile-2-0"></div>
      <div class="tile" id="tile-2-1"></div>
      <div class="tile" id="tile-2-2"></div>
      <div class="tile" id="tile-2-3"></div>
      <div class="tile" id="tile-2-4"></div>
    </div>
    <div class="row">
      <div class="tile" id="tile-3-0"></div>
      <div class="tile" id="tile-3-1"></div>
      <div class="tile" id="tile-3-2"></div>
      <div class="tile" id="tile-3-3"></div>
      <div class="tile" id="tile-3-4"></div>
    </div>
    <div class="row">
      <div class="tile" id="tile-4-0"></div>
      <div class="tile" id="tile-4-1"></div>
      <div class="tile" id="tile-4-2"></div>
      <div class="tile" id="tile-4-3"></div>
      <div class="tile" id="tile-4-4"></div>
    </div>
    <div class="row">
      <div class="tile" id="tile-5-0"></div>
      <div class="tile" id="tile-5-1"></div>
      <div class="tile" id="tile-5-2"></div>
      <div class="tile" id="tile-5-3"></div>
      <div class="tile" id="tile-5-4"></div>
    </div>
  </div>

  <div id="message"></div>
  <div id="controls">
    <button id="resetBtn">Play Again</button>
  </div>

  <script>
    const WORD_LENGTH = 5;
    const MAX_GUESSES = 6;

    // Vern Eideâ€“themed word bank (all 5 letters, uppercase)
    const VERN_EIDE_WORDS = [
    "DRIVE","BRAKE","RIDES","MOTOR","GEARS","ALIGN","SPEED","QUICK","TOTAL","SPORT",
    "COUPE","SEDAN","TRUCK","AXLES","CABIN","PANEL","GUARD","TUNER","FLEET","LEASE",
    "LOANS","TITLE","TRADE","MODEL","VALUE","PRICE","QUOTE","OFFER","BONUS","SAVES",
    "DEALS","SALES","OWNER","POWER","FIXED","PARTS","PAINT","WELDS","TOOLS","TORCH",
    "METAL","FRAME","CLIPS","WIRES","HOSES","BELTS","PUMPS","CLEAN","SCRUB","TOWED",
    "TOWEL","WAXED","SHINE","BOATS","CANOE","KAYAK","OCEAN","RIVER","SHORE","BEACH",
    "HULLS","ROPES","CLEAT","WINCH","FLOAT","WATER","WAVES","TIDES","SWIMS","FISHY",
    "LURES","REELS","HOOKS","BAITS","CATCH","STERN","BOWED","DOCKS","WHARF","RIDER",
    "DUSTY","DUNES","TRAIL","TRACK","RALLY","CHAIN","GLOVE","HELMS","SUITS","ROLLS",
    "JUMPS","FLEET","DAILY","CHECK","READY","MILES","ROADS","TRIPS","VISIT","LOCAL",
    "RIDES","SALES","DEALS","BONUS","VALUE","PRICE","OFFER","QUOTE","TRADE","LEASE",
    "LOANS","MODEL","STOCK","ORDER","TITLE","TAXES","FEES","COSTS","BUYER","RATES",
    "TERMS","TRUST","SERVE","CARES","GUIDE","MEETS","HAPPY","SMILE","HONOR","PROUD",
    "SUNNY","CLOUD","STORM","WINDS","RAINY","CLEAR","BRISK","CHILL","SNOWY","ICING",
    "FROST","WETLY","DRYER","MOIST","HAZY","GUSTS","HEATS","HOTLY","HUMID","ROADS",
    "ROUTE","NORTH","SOUTH","EASTS","WESTS","HILLS","RIDGE","RIVER","PLAZA","TOWNS",
    "CITIES","RURAL","URBAN","LOCAL","METRO","STATE","PATHS","RANCH","VALVE","SPARK",
    "FIRES","TUNED","OILED","OILER","SHAFT","CRANK","FLUID","MOTOR","WIRES","PIPES",
    "LINES","JOINT","LEVER","BOOST","TURBO","FUMES","SMOKE","BLADE","SUNNY","LAKES",
    "PONDS","WATER","WAVES","BEACH","TIDES","SAILS","CREST","BOARD","BOATS","SHIPS",
    "DOCKS","WHARF","OCEAN","SHORE","COVE","STORM","SWIMS","FLOAT","HONDA","ACURA",
    "MITSU","CIVIC","PILOT","RIDGE","FORCE","RODEO","DRIVE","POWER","SPEED","RALLY",
    "TRACK","SHIFT","BRAKE","TIRES","GRIPS","RACES","DRAGS","STUNT","RIDER","CHASE",
    "MOTOR","BOOST","TURBO","DRIFT","SMILE","HAPPY","TRUST","HONOR","THANK","PROUD",
    "TEAMS","SERVE","HELPS","READY","CARES","GUIDE","MEETS","VALUE","BONUS","FAIRS",
    "CLEAR","BRITE","BRAVE","LOANS","LEASE","TERMS","RATES","FEES","TAXES","COSTS",
    "PRICE","VALUE","BONUS","DEALS","FUNDS","MONEY","CHECK","ORDER","STOCK","CLAIM",
    "APPLY","SCORE","BUYER","ALIGN","CLEAN","READY","FIXED","LOCAL","VISIT","TESTS",
    "SHIFT","RIDES","MOTOR","FLUID","SPARK","SMOKE","DRYER","SHINE","BOOST","DRIFT",
    "TRIPS","ROADS","NORTH","SOUTH","EASTS","WESTS","STATE","METRO","URBAN","RURAL",
    "RIVER","TRAIL","TRADE","MODEL","PILOT","CIVIC","ACURA","HONDA","MITSU","OWNER",
    "POWER","SPEED","SHIFT","DRIVE","RIDGE","BEACH","WAVES","WATER","FLOAT","FISHY",
    "CATCH","REELS","HOOKS","BOATS","LAKES","SHORE","RANGE","RIDER","HELMS","BRISK",
    "SUNNY","CLOUD","STORM","CLEAR","CLEAN","READY","SMILE"
    ];
    

    // Deterministic "word of the day" based on the date
    function getDayIndex() {
      const msPerDay = 1000 * 60 * 60 * 24;
      const todayMs = Date.now();
      return Math.floor(todayMs / msPerDay);
    }

    function getDailyWord() {
      const index = getDayIndex() % VERN_EIDE_WORDS.length;
      return VERN_EIDE_WORDS[index];
    }

    let solution = "";
    let currentRow = 0;
    let currentCol = 0;
    let gameOver = false;

    function initGame() {
        solution = getDailyWord();
        currentRow = 0;
        currentCol = 0;
        gameOver = false;
        clearBoard();
      
        if (hasPlayedToday()) {
          // Lock the game for today
          gameOver = true;
          setMessage("You already played VERDLE today. Come back tomorrow!");
          // Optional: disable the reset button
          document.getElementById("resetBtn").disabled = true;
        } else {
          setMessage("Type any 5 letters and press Enter.");
          document.getElementById("resetBtn").disabled = false;
        }
      }
      

    function clearBoard() {
      for (let r = 0; r < MAX_GUESSES; r++) {
        for (let c = 0; c < WORD_LENGTH; c++) {
          const tile = getTile(r, c);
          tile.textContent = "";
          tile.className = "tile"; // reset classes
        }
      }
    }

    function getTile(row, col) {
      return document.getElementById(`tile-${row}-${col}`);
    }

    function setMessage(msg) {
      document.getElementById("message").textContent = msg;
    }
    const VERDLE_LAST_PLAYED_KEY = "verdleLastPlayedDay";

    function getTodayDayIndex() {
      return getDayIndex(); // just alias for clarity
    }
    
    function hasPlayedToday() {
      const stored = localStorage.getItem(VERDLE_LAST_PLAYED_KEY);
      const today = getTodayDayIndex();
      return stored !== null && Number(stored) === today;
    }
    
    function markPlayedToday() {
      const today = getTodayDayIndex();
      localStorage.setItem(VERDLE_LAST_PLAYED_KEY, String(today));
    }
    

    function handleKeyDown(e) {
      if (gameOver) return;

      const key = e.key;

      if (key === "Enter") {
        if (currentCol === WORD_LENGTH) {
          submitGuess();
        } else {
          setMessage("Not enough letters.");
        }
      } else if (key === "Backspace") {
        if (currentCol > 0) {
          currentCol--;
          const tile = getTile(currentRow, currentCol);
          tile.textContent = "";
          tile.classList.remove("filled");
        }
      } else if (/^[a-zA-Z]$/.test(key)) {
        if (currentCol < WORD_LENGTH) {
          const tile = getTile(currentRow, currentCol);
          tile.textContent = key.toUpperCase();
          tile.classList.add("filled");
          currentCol++;
        }
      }
    }

    function submitGuess() {
        let guess = "";
        for (let c = 0; c < WORD_LENGTH; c++) {
          guess += getTile(currentRow, c).textContent;
        }
      
        const result = evaluateGuess(guess, solution);
      
        for (let c = 0; c < WORD_LENGTH; c++) {
          const tile = getTile(currentRow, c);
          tile.classList.remove("correct", "present", "absent");
          tile.classList.add(result[c]);
        }
      
        if (guess === solution) {
          setMessage("You got it! ðŸŽ‰");
          gameOver = true;
          markPlayedToday();                 // ðŸ‘ˆ mark completion
          document.getElementById("resetBtn").disabled = true; // optional
          return;
        }
      
        currentRow++;
        currentCol = 0;
      
        if (currentRow === MAX_GUESSES) {
          setMessage(`Out of guesses! The word was ${solution}.`);
          gameOver = true;
          markPlayedToday();                 // ðŸ‘ˆ mark completion
          document.getElementById("resetBtn").disabled = true; // optional
        } else {
          setMessage("Keep going!");
        }
      }
      

    // Returns array of "correct", "present", "absent" for each letter
    function evaluateGuess(guess, solution) {
      const result = new Array(WORD_LENGTH).fill("absent");
      const solutionCounts = {};

      // First pass: mark correct and count remaining letters in solution
      for (let i = 0; i < WORD_LENGTH; i++) {
        const sChar = solution[i];
        const gChar = guess[i];

        if (gChar === sChar) {
          result[i] = "correct";
        } else {
          solutionCounts[sChar] = (solutionCounts[sChar] || 0) + 1;
        }
      }

      // Second pass: mark present letters using remaining counts
      for (let i = 0; i < WORD_LENGTH; i++) {
        const gChar = guess[i];

        if (result[i] === "correct") continue;

        if (solutionCounts[gChar] > 0) {
          result[i] = "present";
          solutionCounts[gChar]--;
        } else {
          result[i] = "absent";
        }
      }

      return result;
    }

    document.addEventListener("keydown", handleKeyDown);
    document.getElementById("resetBtn").addEventListener("click", initGame);

    initGame();
  </script>
</body>
</html>
